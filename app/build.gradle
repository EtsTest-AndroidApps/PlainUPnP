apply from: "../scripts/android-application.gradle"
apply from: "../scripts/cling.gradle"
apply plugin: 'kotlin-kapt'

android {
    packagingOptions {
        exclude 'META-INF/beans.xml'
    }

    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }

        debug {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    dataBinding {
        enabled = true
    }

    sourceSets {
        main.java.srcDirs += 'src/main/kotlin'
        test.java.srcDirs += 'src/test/kotlin'
        androidTest.java.srcDirs += 'src/androidTest/kotlin'
    }

    kotlinOptions {
        jvmTarget = "1.8"
    }
}

dependencies {
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    implementation deps.kotlin
    implementation deps.coroutines.core
    implementation deps.coroutines.rxJava2

    androidTestImplementation deps.test.core
    androidTestImplementation deps.test.rules
    androidTestImplementation deps.test.espresso.core
    androidTestImplementation deps.test.assertions.junit

    testImplementation deps.test.core
    testImplementation deps.test.rules
    testImplementation deps.test.assertions.junit
    testImplementation deps.test.mockito.core
    testImplementation deps.test.coreTesting

    implementation deps.androidx.navigation.fragment
    implementation deps.androidx.navigation.ui

    implementation deps.support.appCompat
    implementation deps.support.v4
    implementation deps.support.design
    implementation deps.support.recyclerView
    implementation deps.support.cardView
    implementation deps.support.constraintLayout
    implementation deps.support.preferences

    implementation deps.architectureComponents.lifecycle
    implementation deps.architectureComponents.lifecycleReactiveStreams
    implementation deps.timber

    implementation deps.rx.kotlin
    implementation deps.rx.android

    implementation(deps.glide.core) {
        exclude group: "com.android.support"
    }
    kapt deps.glide.compiler

    implementation deps.dagger.core
    compileOnly deps.dagger.annotation
    implementation deps.dagger.android
    implementation deps.dagger.androidSupport
    kapt deps.dagger.compiler
    kapt deps.dagger.androidProcessor

    implementation project(':common')
    implementation project(':upnp')
}

detekt {
    toolVersion = "1.0.0"
    input = files("src/main/java")
    filters = ".*/resources/.*,.*/build/.*"
}